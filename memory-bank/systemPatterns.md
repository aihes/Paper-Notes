# 系统模式：Paper-Notes

## 1. 系统架构概览

本系统采用基于**命令行接口（CLI）的脚本化架构**。其核心是一系列独立的 Python 脚本，每个脚本负责一项特定任务（如内容提取、格式转换、发布）。这些脚本通过命令行参数进行配置，并可以被组合使用以形成完整的工作流。

这种架构的优点是：
- **模块化**：每个脚本功能单一，易于开发、测试和维护。
- **灵活性**：可以轻松地将脚本串联起来，以适应不同的工作流需求。
- **易于自动化**：可以被 Shell 脚本、Makefile 或其他 CI/CD 工具轻松调用。

## 2. 关键设计模式

### a. 任务驱动的脚本

项目中的每个主要功能都由一个专用的脚本实现。例如：
- `scripts/read_paper.py`：负责从 PDF 中提取文本。
- `scripts/html_to_md.py`：负责将 HTML 内容转换为 Markdown。
- `src/utils/twitter_publisher.py`：封装了与 Twitter API 交互的逻辑。

这种模式遵循了“单一职责原则”，使得代码库更加清晰。

### b. 通过文件进行数据传递

不同脚本之间的数据交换主要通过**文件系统**进行。一个脚本的输出（例如，提取的文本）被写入一个文件，然后下一个脚本读取该文件作为其输入。

- **优点**：简单、明确，并且允许在工作流的任何步骤进行手动检查或修改。
- **缺点**：I/O 开销较大，但对于当前项目规模而言可以接受。

### c. 统一的配置管理

敏感信息（如 API 密钥）和环境特定配置通过 `.env` 文件进行管理，并使用 `python-dotenv` 库加载到脚本中。这确保了配置与代码的分离，提高了安全性。

### d. 命令行接口（CLI）作为统一入口

`argparse` 库被广泛用于为每个脚本创建标准化的命令行接口。这提供了一种一致的方式来配置和运行任务，并且自带帮助文档。

## 3. 目录结构模式

- `papers/`：存放原始论文和处理后的产物（如 `README.md`、图片、文本文件）。每个子目录代表一篇论文。
- `scripts/`：存放执行一次性或批量处理任务的独立脚本。
- `src/utils/`：存放可重用的工具函数或类，供其他脚本调用（例如，API 发布器）。
- `memory-bank/`：存放项目元数据和上下文文档，用于指导开发和维护。
- `assets/`：存放项目级别的通用静态资源。
- `prompts/`：存放用于与 LLM 或其他 AI 服务交互的提示模板。
